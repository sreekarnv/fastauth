
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Production-ready authentication for FastAPI applications">
      
      
        <meta name="author" content="Sreekar Nutulapati">
      
      
        <link rel="canonical" href="https://sreekarnv.github.io/fastauth/api-reference/">
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>API Reference - FastAuth Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FastAuth Documentation" class="md-header__button md-logo" aria-label="FastAuth Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FastAuth Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/sreekarnv/fastauth" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sreekarnv/fastauth
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../quickstart/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../architecture/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../reference/" class="md-tabs__link">
        
  
  
    
  
  API Reference

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../contributing/" class="md-tabs__link">
          
  
  
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FastAuth Documentation" class="md-nav__button md-logo" aria-label="FastAuth Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    FastAuth Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sreekarnv/fastauth" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sreekarnv/fastauth
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../oauth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manual Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publishing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Publishing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/users/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Users
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/oauth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sessions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/roles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Account
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/email_verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email Verification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/password_reset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Password Reset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/refresh_tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Refresh Tokens
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/core/hashing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hashing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Adapters
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Adapters
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_1" id="__nav_4_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Base
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Base
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/users/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/oauth_accounts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth Account Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/oauth_states/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth State Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Session Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/roles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Role Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/email_change/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email Change Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/email_verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email Verification Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/password_reset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Password Reset Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/base/refresh_tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Refresh Token Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    SQLAlchemy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    SQLAlchemy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/users/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/oauth_accounts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth Account Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/oauth_states/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth State Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Session Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/roles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Role Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/email_change/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email Change Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/email_verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email Verification Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/password_reset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Password Reset Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/adapters/sqlalchemy/refresh_tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Refresh Token Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auth Routes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/oauth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth Routes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Account Routes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Session Routes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schemas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/security/jwt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JWT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/security/oauth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/security/rate_limit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rate Limiting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/security/email_verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email Verification Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/security/password_reset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Password Reset Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/security/refresh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Refresh Token Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/security/limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Limits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Email
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Email
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/email/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Base Email
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/email/console/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Console Provider
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/email/smtp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMTP Provider
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/email/factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email Factory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Providers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Providers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/providers/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Base Provider
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/providers/google/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../code_of_conduct/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code of Conduct
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>
<p>Complete reference for FastAuth's public API.</p>
<h2 id="core-module">Core Module<a class="headerlink" href="#core-module" title="Permanent link">&para;</a></h2>
<h3 id="fastauthcoreusers"><code>fastauth.core.users</code><a class="headerlink" href="#fastauthcoreusers" title="Permanent link">&para;</a></h3>
<p>User management functions.</p>
<h4 id="create_userusers-email-password"><code>create_user(users, email, password)</code><a class="headerlink" href="#create_userusers-email-password" title="Permanent link">&para;</a></h4>
<p>Create a new user with a hashed password.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter for database operations
- <code>email</code> (str): User's email address
- <code>password</code> (str): Plain text password (will be hashed)</p>
<p><strong>Returns:</strong>
- User object</p>
<p><strong>Raises:</strong>
- <code>UserAlreadyExistsError</code>: If a user with the email already exists</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.users</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_user</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyUserAdapter</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">user</span> <span class="o">=</span> <span class="n">create_user</span><span class="p">(</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">email</span><span class="o">=</span><span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;securepassword123&quot;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="authenticate_userusers-email-password"><code>authenticate_user(users, email, password)</code><a class="headerlink" href="#authenticate_userusers-email-password" title="Permanent link">&para;</a></h4>
<p>Authenticate a user by email and password.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter for database operations
- <code>email</code> (str): User's email address
- <code>password</code> (str): Plain text password to verify</p>
<p><strong>Returns:</strong>
- User object</p>
<p><strong>Raises:</strong>
- <code>InvalidCredentialsError</code>: If email doesn't exist, password is wrong, or user is inactive
- <code>EmailNotVerifiedError</code>: If email verification is required but not completed</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.users</span><span class="w"> </span><span class="kn">import</span> <span class="n">authenticate_user</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">user</span> <span class="o">=</span> <span class="n">authenticate_user</span><span class="p">(</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="n">email</span><span class="o">=</span><span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;securepassword123&quot;</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="p">)</span>
</span></code></pre></div></p>
<h3 id="fastauthcorerefresh_tokens"><code>fastauth.core.refresh_tokens</code><a class="headerlink" href="#fastauthcorerefresh_tokens" title="Permanent link">&para;</a></h3>
<p>Refresh token management.</p>
<h4 id="create_refresh_tokenrefresh_tokens-user_id-expires_delta"><code>create_refresh_token(refresh_tokens, user_id, expires_delta)</code><a class="headerlink" href="#create_refresh_tokenrefresh_tokens-user_id-expires_delta" title="Permanent link">&para;</a></h4>
<p>Create a new refresh token for a user.</p>
<p><strong>Parameters:</strong>
- <code>refresh_tokens</code> (RefreshTokenAdapter): Refresh token adapter
- <code>user_id</code> (UUID): User's unique identifier
- <code>expires_delta</code> (timedelta, optional): Token expiration time</p>
<p><strong>Returns:</strong>
- Tuple of (token string, token hash)</p>
<h4 id="refresh_access_tokenrefresh_tokens-users-refresh_token_str"><code>refresh_access_token(refresh_tokens, users, refresh_token_str)</code><a class="headerlink" href="#refresh_access_tokenrefresh_tokens-users-refresh_token_str" title="Permanent link">&para;</a></h4>
<p>Generate new access token using a refresh token.</p>
<p><strong>Parameters:</strong>
- <code>refresh_tokens</code> (RefreshTokenAdapter): Refresh token adapter
- <code>users</code> (UserAdapter): User adapter
- <code>refresh_token_str</code> (str): Refresh token string</p>
<p><strong>Returns:</strong>
- Dict with new access_token and refresh_token</p>
<p><strong>Raises:</strong>
- <code>RefreshTokenError</code>: If token is invalid or expired</p>
<h3 id="fastauthcorepassword_reset"><code>fastauth.core.password_reset</code><a class="headerlink" href="#fastauthcorepassword_reset" title="Permanent link">&para;</a></h3>
<p>Password reset functionality.</p>
<h4 id="request_password_resetusers-password_resets-email"><code>request_password_reset(users, password_resets, email)</code><a class="headerlink" href="#request_password_resetusers-password_resets-email" title="Permanent link">&para;</a></h4>
<p>Request a password reset token.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter
- <code>password_resets</code> (PasswordResetAdapter): Password reset adapter
- <code>email</code> (str): User's email address</p>
<p><strong>Returns:</strong>
- Password reset token string</p>
<h4 id="confirm_password_resetusers-password_resets-token-new_password"><code>confirm_password_reset(users, password_resets, token, new_password)</code><a class="headerlink" href="#confirm_password_resetusers-password_resets-token-new_password" title="Permanent link">&para;</a></h4>
<p>Reset password using a valid token.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter
- <code>password_resets</code> (PasswordResetAdapter): Password reset adapter
- <code>token</code> (str): Password reset token
- <code>new_password</code> (str): New password (plain text)</p>
<p><strong>Raises:</strong>
- <code>PasswordResetError</code>: If token is invalid or expired</p>
<h3 id="fastauthcoreemail_verification"><code>fastauth.core.email_verification</code><a class="headerlink" href="#fastauthcoreemail_verification" title="Permanent link">&para;</a></h3>
<p>Email verification functionality.</p>
<h4 id="send_verification_emailusers-email_verifications-email_provider-user_id"><code>send_verification_email(users, email_verifications, email_provider, user_id)</code><a class="headerlink" href="#send_verification_emailusers-email_verifications-email_provider-user_id" title="Permanent link">&para;</a></h4>
<p>Send email verification token to user.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter
- <code>email_verifications</code> (EmailVerificationAdapter): Email verification adapter
- <code>email_provider</code>: Email provider instance
- <code>user_id</code> (UUID): User's unique identifier</p>
<p><strong>Returns:</strong>
- Verification token string</p>
<h4 id="verify_emailusers-email_verifications-token"><code>verify_email(users, email_verifications, token)</code><a class="headerlink" href="#verify_emailusers-email_verifications-token" title="Permanent link">&para;</a></h4>
<p>Verify user's email with token.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter
- <code>email_verifications</code> (EmailVerificationAdapter): Email verification adapter
- <code>token</code> (str): Verification token</p>
<p><strong>Raises:</strong>
- <code>EmailVerificationError</code>: If token is invalid or expired</p>
<h3 id="fastauthcoreroles"><code>fastauth.core.roles</code><a class="headerlink" href="#fastauthcoreroles" title="Permanent link">&para;</a></h3>
<p>Role-Based Access Control (RBAC) functions.</p>
<h4 id="create_roleroles-name-description"><code>create_role(roles, name, description)</code><a class="headerlink" href="#create_roleroles-name-description" title="Permanent link">&para;</a></h4>
<p>Create a new role.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>name</code> (str): Unique role name
- <code>description</code> (str, optional): Role description</p>
<p><strong>Returns:</strong>
- Role object</p>
<p><strong>Raises:</strong>
- <code>RoleAlreadyExistsError</code>: If a role with the name already exists</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.roles</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_role</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">admin_role</span> <span class="o">=</span> <span class="n">create_role</span><span class="p">(</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="n">roles</span><span class="o">=</span><span class="n">role_adapter</span><span class="p">,</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Administrator role&quot;</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="create_permissionroles-name-description"><code>create_permission(roles, name, description)</code><a class="headerlink" href="#create_permissionroles-name-description" title="Permanent link">&para;</a></h4>
<p>Create a new permission.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>name</code> (str): Unique permission name
- <code>description</code> (str, optional): Permission description</p>
<p><strong>Returns:</strong>
- Permission object</p>
<p><strong>Raises:</strong>
- <code>PermissionAlreadyExistsError</code>: If a permission with the name already exists</p>
<h4 id="assign_roleroles-user_id-role_name"><code>assign_role(roles, user_id, role_name)</code><a class="headerlink" href="#assign_roleroles-user_id-role_name" title="Permanent link">&para;</a></h4>
<p>Assign a role to a user.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier
- <code>role_name</code> (str): Name of the role to assign</p>
<p><strong>Raises:</strong>
- <code>RoleNotFoundError</code>: If the role does not exist</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.roles</span><span class="w"> </span><span class="kn">import</span> <span class="n">assign_role</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">assign_role</span><span class="p">(</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="n">roles</span><span class="o">=</span><span class="n">role_adapter</span><span class="p">,</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    <span class="n">role_name</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="remove_roleroles-user_id-role_name"><code>remove_role(roles, user_id, role_name)</code><a class="headerlink" href="#remove_roleroles-user_id-role_name" title="Permanent link">&para;</a></h4>
<p>Remove a role from a user.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier
- <code>role_name</code> (str): Name of the role to remove</p>
<p><strong>Raises:</strong>
- <code>RoleNotFoundError</code>: If the role does not exist</p>
<h4 id="assign_permission_to_roleroles-role_name-permission_name"><code>assign_permission_to_role(roles, role_name, permission_name)</code><a class="headerlink" href="#assign_permission_to_roleroles-role_name-permission_name" title="Permanent link">&para;</a></h4>
<p>Assign a permission to a role.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>role_name</code> (str): Name of the role
- <code>permission_name</code> (str): Name of the permission to assign</p>
<p><strong>Raises:</strong>
- <code>RoleNotFoundError</code>: If the role does not exist
- <code>PermissionNotFoundError</code>: If the permission does not exist</p>
<h4 id="check_permissionroles-user_id-permission_name"><code>check_permission(roles, user_id, permission_name)</code><a class="headerlink" href="#check_permissionroles-user_id-permission_name" title="Permanent link">&para;</a></h4>
<p>Check if a user has a specific permission through any of their roles.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier
- <code>permission_name</code> (str): Name of the permission to check</p>
<p><strong>Returns:</strong>
- bool: True if user has the permission, False otherwise</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.roles</span><span class="w"> </span><span class="kn">import</span> <span class="n">check_permission</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">has_access</span> <span class="o">=</span> <span class="n">check_permission</span><span class="p">(</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="n">roles</span><span class="o">=</span><span class="n">role_adapter</span><span class="p">,</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    <span class="n">permission_name</span><span class="o">=</span><span class="s2">&quot;delete:users&quot;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="get_user_rolesroles-user_id"><code>get_user_roles(roles, user_id)</code><a class="headerlink" href="#get_user_rolesroles-user_id" title="Permanent link">&para;</a></h4>
<p>Get all roles assigned to a user.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier</p>
<p><strong>Returns:</strong>
- List of role objects</p>
<h4 id="get_user_permissionsroles-user_id"><code>get_user_permissions(roles, user_id)</code><a class="headerlink" href="#get_user_permissionsroles-user_id" title="Permanent link">&para;</a></h4>
<p>Get all permissions for a user across all their roles.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier</p>
<p><strong>Returns:</strong>
- List of permission objects</p>
<h4 id="get_role_permissionsroles-role_name"><code>get_role_permissions(roles, role_name)</code><a class="headerlink" href="#get_role_permissionsroles-role_name" title="Permanent link">&para;</a></h4>
<p>Get all permissions assigned to a role.</p>
<p><strong>Parameters:</strong>
- <code>roles</code> (RoleAdapter): Role adapter for database operations
- <code>role_name</code> (str): Name of the role</p>
<p><strong>Returns:</strong>
- List of permission objects</p>
<p><strong>Raises:</strong>
- <code>RoleNotFoundError</code>: If the role does not exist</p>
<h3 id="fastauthcoresessions"><code>fastauth.core.sessions</code><a class="headerlink" href="#fastauthcoresessions" title="Permanent link">&para;</a></h3>
<p>Session management functions.</p>
<h4 id="create_sessionsessions-users-user_id-device-ip_address-user_agent"><code>create_session(sessions, users, user_id, device, ip_address, user_agent)</code><a class="headerlink" href="#create_sessionsessions-users-user_id-device-ip_address-user_agent" title="Permanent link">&para;</a></h4>
<p>Create a new session for a user and update their last login timestamp.</p>
<p><strong>Parameters:</strong>
- <code>sessions</code> (SessionAdapter): Session adapter for database operations
- <code>users</code> (UserAdapter): User adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier
- <code>device</code> (str, optional): Device information
- <code>ip_address</code> (str, optional): IP address of the client
- <code>user_agent</code> (str, optional): User agent string</p>
<p><strong>Returns:</strong>
- Session object</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.sessions</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_session</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">session</span> <span class="o">=</span> <span class="n">create_session</span><span class="p">(</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="n">device</span><span class="o">=</span><span class="s2">&quot;iPhone 13&quot;</span><span class="p">,</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="n">ip_address</span><span class="o">=</span><span class="s2">&quot;192.168.1.1&quot;</span><span class="p">,</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    <span class="n">user_agent</span><span class="o">=</span><span class="s2">&quot;Mozilla/5.0&quot;</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="get_user_sessionssessions-user_id"><code>get_user_sessions(sessions, user_id)</code><a class="headerlink" href="#get_user_sessionssessions-user_id" title="Permanent link">&para;</a></h4>
<p>Get all active sessions for a user.</p>
<p><strong>Parameters:</strong>
- <code>sessions</code> (SessionAdapter): Session adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier</p>
<p><strong>Returns:</strong>
- List of session objects</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.sessions</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_user_sessions</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">sessions_list</span> <span class="o">=</span> <span class="n">get_user_sessions</span><span class="p">(</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="delete_sessionsessions-session_id-user_id"><code>delete_session(sessions, session_id, user_id)</code><a class="headerlink" href="#delete_sessionsessions-session_id-user_id" title="Permanent link">&para;</a></h4>
<p>Delete a specific session with ownership verification.</p>
<p><strong>Parameters:</strong>
- <code>sessions</code> (SessionAdapter): Session adapter for database operations
- <code>session_id</code> (UUID): Session's unique identifier
- <code>user_id</code> (UUID): User's unique identifier (for authorization)</p>
<p><strong>Raises:</strong>
- <code>SessionNotFoundError</code>: If session doesn't exist or doesn't belong to user</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.sessions</span><span class="w"> </span><span class="kn">import</span> <span class="n">delete_session</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">delete_session</span><span class="p">(</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="n">session_id</span><span class="o">=</span><span class="n">session_id</span><span class="p">,</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="delete_all_user_sessionssessions-user_id-except_session_id"><code>delete_all_user_sessions(sessions, user_id, except_session_id)</code><a class="headerlink" href="#delete_all_user_sessionssessions-user_id-except_session_id" title="Permanent link">&para;</a></h4>
<p>Delete all sessions for a user, optionally excluding the current session.</p>
<p><strong>Parameters:</strong>
- <code>sessions</code> (SessionAdapter): Session adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier
- <code>except_session_id</code> (UUID, optional): Session ID to keep (current session)</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.sessions</span><span class="w"> </span><span class="kn">import</span> <span class="n">delete_all_user_sessions</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="c1"># Delete all sessions except current</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">delete_all_user_sessions</span><span class="p">(</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span class="n">except_session_id</span><span class="o">=</span><span class="n">current_session_id</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="p">)</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="c1"># Delete all sessions</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="n">delete_all_user_sessions</span><span class="p">(</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="update_session_activitysessions-session_id"><code>update_session_activity(sessions, session_id)</code><a class="headerlink" href="#update_session_activitysessions-session_id" title="Permanent link">&para;</a></h4>
<p>Update the last active timestamp for a session.</p>
<p><strong>Parameters:</strong>
- <code>sessions</code> (SessionAdapter): Session adapter for database operations
- <code>session_id</code> (UUID): Session's unique identifier</p>
<h4 id="cleanup_inactive_sessionssessions-inactive_days"><code>cleanup_inactive_sessions(sessions, inactive_days)</code><a class="headerlink" href="#cleanup_inactive_sessionssessions-inactive_days" title="Permanent link">&para;</a></h4>
<p>Remove sessions that haven't been active for a specified number of days.</p>
<p><strong>Parameters:</strong>
- <code>sessions</code> (SessionAdapter): Session adapter for database operations
- <code>inactive_days</code> (int): Number of days of inactivity before cleanup (default: 30)</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.sessions</span><span class="w"> </span><span class="kn">import</span> <span class="n">cleanup_inactive_sessions</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1"># Remove sessions inactive for 30+ days</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="n">cleanup_inactive_sessions</span><span class="p">(</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    <span class="n">inactive_days</span><span class="o">=</span><span class="mi">30</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="p">)</span>
</span></code></pre></div></p>
<h3 id="fastauthcoreoauth"><code>fastauth.core.oauth</code><a class="headerlink" href="#fastauthcoreoauth" title="Permanent link">&para;</a></h3>
<p>OAuth 2.0 authentication functions.</p>
<h4 id="initiate_oauth_flowoauth_states-provider-redirect_uri-state_data-use_pkce"><code>initiate_oauth_flow(oauth_states, provider, redirect_uri, state_data, use_pkce)</code><a class="headerlink" href="#initiate_oauth_flowoauth_states-provider-redirect_uri-state_data-use_pkce" title="Permanent link">&para;</a></h4>
<p>Initiate an OAuth 2.0 authorization flow.</p>
<p><strong>Parameters:</strong>
- <code>oauth_states</code> (OAuthStateAdapter): OAuth state adapter for database operations
- <code>provider</code> (OAuthProvider): OAuth provider instance (e.g., GoogleOAuthProvider)
- <code>redirect_uri</code> (str): Callback URL after OAuth authorization
- <code>state_data</code> (dict, optional): Additional data to store in state
- <code>use_pkce</code> (bool): Whether to use PKCE (Proof Key for Code Exchange) (default: False)</p>
<p><strong>Returns:</strong>
- Dict with <code>authorization_url</code> (str) and <code>state</code> (str)</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.oauth</span><span class="w"> </span><span class="kn">import</span> <span class="n">initiate_oauth_flow</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.providers</span><span class="w"> </span><span class="kn">import</span> <span class="n">GoogleOAuthProvider</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="n">provider</span> <span class="o">=</span> <span class="n">GoogleOAuthProvider</span><span class="p">(</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    <span class="n">client_id</span><span class="o">=</span><span class="s2">&quot;your-client-id&quot;</span><span class="p">,</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="n">client_secret</span><span class="o">=</span><span class="s2">&quot;your-client-secret&quot;</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="p">)</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="n">result</span> <span class="o">=</span> <span class="n">initiate_oauth_flow</span><span class="p">(</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>    <span class="n">oauth_states</span><span class="o">=</span><span class="n">oauth_state_adapter</span><span class="p">,</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>    <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">,</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    <span class="n">redirect_uri</span><span class="o">=</span><span class="s2">&quot;http://localhost:8000/auth/oauth/google/callback&quot;</span><span class="p">,</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>    <span class="n">use_pkce</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="p">)</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="c1"># result = {&quot;authorization_url&quot;: &quot;https://...&quot;, &quot;state&quot;: &quot;...&quot;}</span>
</span></code></pre></div></p>
<h4 id="complete_oauth_flowoauth_states-oauth_accounts-users-provider-code-state-link_user_id"><code>complete_oauth_flow(oauth_states, oauth_accounts, users, provider, code, state, link_user_id)</code><a class="headerlink" href="#complete_oauth_flowoauth_states-oauth_accounts-users-provider-code-state-link_user_id" title="Permanent link">&para;</a></h4>
<p>Complete an OAuth 2.0 authorization flow and create or link account.</p>
<p><strong>Parameters:</strong>
- <code>oauth_states</code> (OAuthStateAdapter): OAuth state adapter
- <code>oauth_accounts</code> (OAuthAccountAdapter): OAuth account adapter
- <code>users</code> (UserAdapter): User adapter
- <code>provider</code> (OAuthProvider): OAuth provider instance
- <code>code</code> (str): Authorization code from OAuth provider
- <code>state</code> (str): State token to validate
- <code>link_user_id</code> (UUID, optional): User ID to link account to (if authenticated)</p>
<p><strong>Returns:</strong>
- Tuple of (User object, bool indicating if new user was created)</p>
<p><strong>Raises:</strong>
- <code>OAuthError</code>: If state is invalid, expired, or code exchange fails</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.oauth</span><span class="w"> </span><span class="kn">import</span> <span class="n">complete_oauth_flow</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">user</span><span class="p">,</span> <span class="n">is_new</span> <span class="o">=</span> <span class="k">await</span> <span class="n">complete_oauth_flow</span><span class="p">(</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    <span class="n">oauth_states</span><span class="o">=</span><span class="n">oauth_state_adapter</span><span class="p">,</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>    <span class="n">oauth_accounts</span><span class="o">=</span><span class="n">oauth_account_adapter</span><span class="p">,</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">,</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="n">code</span><span class="o">=</span><span class="s2">&quot;authorization_code&quot;</span><span class="p">,</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>    <span class="n">state</span><span class="o">=</span><span class="s2">&quot;state_token&quot;</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="get_linked_accountsoauth_accounts-user_id"><code>get_linked_accounts(oauth_accounts, user_id)</code><a class="headerlink" href="#get_linked_accountsoauth_accounts-user_id" title="Permanent link">&para;</a></h4>
<p>Get all OAuth accounts linked to a user.</p>
<p><strong>Parameters:</strong>
- <code>oauth_accounts</code> (OAuthAccountAdapter): OAuth account adapter
- <code>user_id</code> (UUID): User's unique identifier</p>
<p><strong>Returns:</strong>
- List of OAuthAccount objects</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.oauth</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_linked_accounts</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="n">accounts</span> <span class="o">=</span> <span class="n">get_linked_accounts</span><span class="p">(</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="n">oauth_accounts</span><span class="o">=</span><span class="n">oauth_account_adapter</span><span class="p">,</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="unlink_oauth_accountoauth_accounts-account_id-user_id"><code>unlink_oauth_account(oauth_accounts, account_id, user_id)</code><a class="headerlink" href="#unlink_oauth_accountoauth_accounts-account_id-user_id" title="Permanent link">&para;</a></h4>
<p>Unlink an OAuth account from a user.</p>
<p><strong>Parameters:</strong>
- <code>oauth_accounts</code> (OAuthAccountAdapter): OAuth account adapter
- <code>account_id</code> (UUID): OAuth account's unique identifier
- <code>user_id</code> (UUID): User's unique identifier (for authorization)</p>
<p><strong>Raises:</strong>
- <code>OAuthAccountNotFoundError</code>: If account doesn't exist or doesn't belong to user</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.oauth</span><span class="w"> </span><span class="kn">import</span> <span class="n">unlink_oauth_account</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">unlink_oauth_account</span><span class="p">(</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="n">oauth_accounts</span><span class="o">=</span><span class="n">oauth_account_adapter</span><span class="p">,</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="p">)</span>
</span></code></pre></div></p>
<h3 id="fastauthcoreaccount"><code>fastauth.core.account</code><a class="headerlink" href="#fastauthcoreaccount" title="Permanent link">&para;</a></h3>
<p>Account management functions for authenticated users.</p>
<h4 id="change_passwordusers-sessions-user_id-current_password-new_password-current_session_id"><code>change_password(users, sessions, user_id, current_password, new_password, current_session_id)</code><a class="headerlink" href="#change_passwordusers-sessions-user_id-current_password-new_password-current_session_id" title="Permanent link">&para;</a></h4>
<p>Change a user's password with verification.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter for database operations
- <code>sessions</code> (SessionAdapter): Session adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier
- <code>current_password</code> (str): Current password for verification
- <code>new_password</code> (str): New password to set
- <code>current_session_id</code> (UUID, optional): Session ID to preserve during logout</p>
<p><strong>Raises:</strong>
- <code>UserNotFoundError</code>: If the user doesn't exist
- <code>InvalidPasswordError</code>: If the current password is incorrect</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">change_password</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">change_password</span><span class="p">(</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>    <span class="n">current_password</span><span class="o">=</span><span class="s2">&quot;old_password&quot;</span><span class="p">,</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>    <span class="n">new_password</span><span class="o">=</span><span class="s2">&quot;new_password&quot;</span><span class="p">,</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>    <span class="n">current_session_id</span><span class="o">=</span><span class="n">current_session</span><span class="o">.</span><span class="n">id</span>  <span class="c1"># Optional: preserve current session</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Note:</strong> Automatically invalidates all other sessions for security.</p>
<h4 id="delete_accountusers-sessions-user_id-password-hard_delete"><code>delete_account(users, sessions, user_id, password, hard_delete)</code><a class="headerlink" href="#delete_accountusers-sessions-user_id-password-hard_delete" title="Permanent link">&para;</a></h4>
<p>Delete a user account with soft or hard delete.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter for database operations
- <code>sessions</code> (SessionAdapter): Session adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier
- <code>password</code> (str): Password for verification
- <code>hard_delete</code> (bool): If True, permanently delete; if False, soft delete (default: False)</p>
<p><strong>Raises:</strong>
- <code>UserNotFoundError</code>: If the user doesn't exist
- <code>InvalidPasswordError</code>: If the password is incorrect</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">delete_account</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="c1"># Soft delete (deactivate account, preserve data)</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="n">delete_account</span><span class="p">(</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;user_password&quot;</span><span class="p">,</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    <span class="n">hard_delete</span><span class="o">=</span><span class="kc">False</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="p">)</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="c1"># Hard delete (permanent removal)</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="n">delete_account</span><span class="p">(</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>    <span class="n">sessions</span><span class="o">=</span><span class="n">session_adapter</span><span class="p">,</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;user_password&quot;</span><span class="p">,</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>    <span class="n">hard_delete</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Note:</strong> Soft delete sets <code>deleted_at</code> timestamp and deactivates account. Hard delete permanently removes user from database. Both invalidate all sessions.</p>
<h4 id="request_email_changeusers-email_changes-user_id-new_email-expires_in_minutes"><code>request_email_change(users, email_changes, user_id, new_email, expires_in_minutes)</code><a class="headerlink" href="#request_email_changeusers-email_changes-user_id-new_email-expires_in_minutes" title="Permanent link">&para;</a></h4>
<p>Request an email change with verification token.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter for database operations
- <code>email_changes</code> (EmailChangeAdapter): Email change adapter for database operations
- <code>user_id</code> (UUID): User's unique identifier
- <code>new_email</code> (str): New email address
- <code>expires_in_minutes</code> (int): Token expiration time in minutes (default: 60)</p>
<p><strong>Returns:</strong>
- Verification token string if successful, None if user not found</p>
<p><strong>Raises:</strong>
- <code>EmailAlreadyExistsError</code>: If the new email already exists</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">request_email_change</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="n">token</span> <span class="o">=</span> <span class="n">request_email_change</span><span class="p">(</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>    <span class="n">email_changes</span><span class="o">=</span><span class="n">email_change_adapter</span><span class="p">,</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>    <span class="n">new_email</span><span class="o">=</span><span class="s2">&quot;newemail@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>    <span class="n">expires_in_minutes</span><span class="o">=</span><span class="mi">60</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="confirm_email_changeusers-email_changes-token"><code>confirm_email_change(users, email_changes, token)</code><a class="headerlink" href="#confirm_email_changeusers-email_changes-token" title="Permanent link">&para;</a></h4>
<p>Confirm an email change with verification token.</p>
<p><strong>Parameters:</strong>
- <code>users</code> (UserAdapter): User adapter for database operations
- <code>email_changes</code> (EmailChangeAdapter): Email change adapter for database operations
- <code>token</code> (str): Verification token</p>
<p><strong>Raises:</strong>
- <code>EmailChangeError</code>: If token is invalid or expired
- <code>EmailAlreadyExistsError</code>: If the new email is no longer available</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.core.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">confirm_email_change</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">confirm_email_change</span><span class="p">(</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    <span class="n">users</span><span class="o">=</span><span class="n">user_adapter</span><span class="p">,</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>    <span class="n">email_changes</span><span class="o">=</span><span class="n">email_change_adapter</span><span class="p">,</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>    <span class="n">token</span><span class="o">=</span><span class="n">verification_token</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Note:</strong> Email change resets <code>is_verified</code> to False, requiring re-verification.</p>
<h2 id="adapters">Adapters<a class="headerlink" href="#adapters" title="Permanent link">&para;</a></h2>
<h3 id="base-adapters">Base Adapters<a class="headerlink" href="#base-adapters" title="Permanent link">&para;</a></h3>
<h4 id="useradapter"><code>UserAdapter</code><a class="headerlink" href="#useradapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for user database operations.</p>
<p><strong>Methods:</strong>
- <code>get_by_email(email)</code> - Retrieve user by email
- <code>get_by_id(user_id)</code> - Retrieve user by ID
- <code>create_user(email, hashed_password)</code> - Create new user
- <code>mark_verified(user_id)</code> - Mark email as verified
- <code>set_password(user_id, new_password)</code> - Update password
- <code>update_last_login(user_id)</code> - Update last login timestamp
- <code>update_email(user_id, new_email)</code> - Update user's email address
- <code>soft_delete_user(user_id)</code> - Soft delete user (set deleted_at timestamp)
- <code>hard_delete_user(user_id)</code> - Permanently delete user from database</p>
<h4 id="refreshtokenadapter"><code>RefreshTokenAdapter</code><a class="headerlink" href="#refreshtokenadapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for refresh token operations.</p>
<p><strong>Methods:</strong>
- <code>create(user_id, token_hash, expires_at)</code> - Create refresh token
- <code>get_active(token_hash)</code> - Get active token by hash
- <code>revoke(token_hash)</code> - Revoke a token</p>
<h4 id="passwordresetadapter"><code>PasswordResetAdapter</code><a class="headerlink" href="#passwordresetadapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for password reset operations.</p>
<p><strong>Methods:</strong>
- <code>create(user_id, token_hash, expires_at)</code> - Create reset token
- <code>get_valid(token_hash)</code> - Get valid token by hash
- <code>mark_used(token_hash)</code> - Mark token as used</p>
<h4 id="emailverificationadapter"><code>EmailVerificationAdapter</code><a class="headerlink" href="#emailverificationadapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for email verification operations.</p>
<p><strong>Methods:</strong>
- <code>create(user_id, token_hash, expires_at)</code> - Create verification token
- <code>get_valid(token_hash)</code> - Get valid token by hash
- <code>mark_used(token_hash)</code> - Mark token as used</p>
<h4 id="roleadapter"><code>RoleAdapter</code><a class="headerlink" href="#roleadapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for role and permission operations.</p>
<p><strong>Methods:</strong>
- <code>create_role(name, description)</code> - Create a new role
- <code>get_role_by_name(name)</code> - Retrieve role by name
- <code>create_permission(name, description)</code> - Create a new permission
- <code>get_permission_by_name(name)</code> - Retrieve permission by name
- <code>assign_role_to_user(user_id, role_id)</code> - Assign role to user
- <code>remove_role_from_user(user_id, role_id)</code> - Remove role from user
- <code>get_user_roles(user_id)</code> - Get all roles for a user
- <code>assign_permission_to_role(role_id, permission_id)</code> - Assign permission to role
- <code>get_role_permissions(role_id)</code> - Get all permissions for a role
- <code>get_user_permissions(user_id)</code> - Get all permissions for a user (from all roles)</p>
<h4 id="sessionadapter"><code>SessionAdapter</code><a class="headerlink" href="#sessionadapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for session management operations.</p>
<p><strong>Methods:</strong>
- <code>create_session(user_id, device, ip_address, user_agent)</code> - Create a new session
- <code>get_session_by_id(session_id)</code> - Retrieve session by ID
- <code>get_user_sessions(user_id)</code> - Get all sessions for a user
- <code>delete_session(session_id)</code> - Delete a specific session
- <code>delete_user_sessions(user_id, except_session_id)</code> - Delete all user sessions (optionally except one)
- <code>update_last_active(session_id)</code> - Update session's last active timestamp
- <code>cleanup_inactive_sessions(inactive_days)</code> - Remove inactive sessions</p>
<h4 id="emailchangeadapter"><code>EmailChangeAdapter</code><a class="headerlink" href="#emailchangeadapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for email change token operations.</p>
<p><strong>Methods:</strong>
- <code>create(user_id, new_email, token_hash, expires_at)</code> - Create email change request with token
- <code>get_valid(token_hash)</code> - Get valid (not used) email change record by token hash
- <code>mark_used(token_hash)</code> - Mark email change token as used</p>
<h4 id="oauthaccountadapter"><code>OAuthAccountAdapter</code><a class="headerlink" href="#oauthaccountadapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for OAuth account operations.</p>
<p><strong>Methods:</strong>
- <code>create(user_id, provider, provider_user_id, access_token, refresh_token, expires_at)</code> - Create OAuth account link
- <code>get_by_provider_user_id(provider, provider_user_id)</code> - Get OAuth account by provider and provider user ID
- <code>get_by_user_id(user_id)</code> - Get all OAuth accounts for a user
- <code>get_by_id(account_id)</code> - Get OAuth account by ID
- <code>delete(account_id)</code> - Delete OAuth account link</p>
<h4 id="oauthstateadapter"><code>OAuthStateAdapter</code><a class="headerlink" href="#oauthstateadapter" title="Permanent link">&para;</a></h4>
<p>Abstract base class for OAuth state token operations.</p>
<p><strong>Methods:</strong>
- <code>create(state_hash, provider, redirect_uri, code_verifier, expires_at, state_data)</code> - Create OAuth state token
- <code>get_valid(state_hash)</code> - Get valid (not expired) state record by hash
- <code>delete(state_hash)</code> - Delete used state token</p>
<h3 id="sqlalchemy-adapters">SQLAlchemy Adapters<a class="headerlink" href="#sqlalchemy-adapters" title="Permanent link">&para;</a></h3>
<h4 id="sqlalchemyuseradapter"><code>SQLAlchemyUserAdapter</code><a class="headerlink" href="#sqlalchemyuseradapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of UserAdapter.</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sqlmodel</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyUserAdapter</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">adapter</span> <span class="o">=</span> <span class="n">SQLAlchemyUserAdapter</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="n">user</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>    <span class="n">email</span><span class="o">=</span><span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>    <span class="n">hashed_password</span><span class="o">=</span><span class="s2">&quot;hashed...&quot;</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="sqlalchemyrefreshtokenadapter"><code>SQLAlchemyRefreshTokenAdapter</code><a class="headerlink" href="#sqlalchemyrefreshtokenadapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of RefreshTokenAdapter.</p>
<h4 id="sqlalchemypasswordresetadapter"><code>SQLAlchemyPasswordResetAdapter</code><a class="headerlink" href="#sqlalchemypasswordresetadapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of PasswordResetAdapter.</p>
<h4 id="sqlalchemyemailverificationadapter"><code>SQLAlchemyEmailVerificationAdapter</code><a class="headerlink" href="#sqlalchemyemailverificationadapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of EmailVerificationAdapter.</p>
<h4 id="sqlalchemyroleadapter"><code>SQLAlchemyRoleAdapter</code><a class="headerlink" href="#sqlalchemyroleadapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of RoleAdapter.</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sqlmodel</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyRoleAdapter</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">role_adapter</span> <span class="o">=</span> <span class="n">SQLAlchemyRoleAdapter</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">role</span> <span class="o">=</span> <span class="n">role_adapter</span><span class="o">.</span><span class="n">create_role</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Administrator role&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="sqlalchemysessionadapter"><code>SQLAlchemySessionAdapter</code><a class="headerlink" href="#sqlalchemysessionadapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of SessionAdapter.</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sqlmodel</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemySessionAdapter</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="n">session_adapter</span> <span class="o">=</span> <span class="n">SQLAlchemySessionAdapter</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="n">session</span> <span class="o">=</span> <span class="n">session_adapter</span><span class="o">.</span><span class="n">create_session</span><span class="p">(</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>    <span class="n">device</span><span class="o">=</span><span class="s2">&quot;iPhone 13&quot;</span><span class="p">,</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="n">ip_address</span><span class="o">=</span><span class="s2">&quot;192.168.1.1&quot;</span><span class="p">,</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    <span class="n">user_agent</span><span class="o">=</span><span class="s2">&quot;Mozilla/5.0&quot;</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="sqlalchemyemailchangeadapter"><code>SQLAlchemyEmailChangeAdapter</code><a class="headerlink" href="#sqlalchemyemailchangeadapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of EmailChangeAdapter.</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sqlmodel</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyEmailChangeAdapter</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="n">email_change_adapter</span> <span class="o">=</span> <span class="n">SQLAlchemyEmailChangeAdapter</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="n">email_change_adapter</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>    <span class="n">new_email</span><span class="o">=</span><span class="s2">&quot;newemail@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>    <span class="n">token_hash</span><span class="o">=</span><span class="s2">&quot;hashed_token&quot;</span><span class="p">,</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>    <span class="n">expires_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">UTC</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="sqlalchemyoauthaccountadapter"><code>SQLAlchemyOAuthAccountAdapter</code><a class="headerlink" href="#sqlalchemyoauthaccountadapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of OAuthAccountAdapter.</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sqlmodel</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyOAuthAccountAdapter</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="n">oauth_account_adapter</span> <span class="o">=</span> <span class="n">SQLAlchemyOAuthAccountAdapter</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="n">oauth_account</span> <span class="o">=</span> <span class="n">oauth_account_adapter</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>    <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>    <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    <span class="n">provider_user_id</span><span class="o">=</span><span class="s2">&quot;google_user_123&quot;</span><span class="p">,</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span class="n">access_token</span><span class="o">=</span><span class="s2">&quot;encrypted_access_token&quot;</span><span class="p">,</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>    <span class="n">refresh_token</span><span class="o">=</span><span class="s2">&quot;encrypted_refresh_token&quot;</span><span class="p">,</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>    <span class="n">expires_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">UTC</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="p">)</span>
</span></code></pre></div></p>
<h4 id="sqlalchemyoauthstateadapter"><code>SQLAlchemyOAuthStateAdapter</code><a class="headerlink" href="#sqlalchemyoauthstateadapter" title="Permanent link">&para;</a></h4>
<p>SQLAlchemy implementation of OAuthStateAdapter.</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sqlmodel</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyOAuthStateAdapter</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="n">oauth_state_adapter</span> <span class="o">=</span> <span class="n">SQLAlchemyOAuthStateAdapter</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="n">oauth_state_adapter</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>    <span class="n">state_hash</span><span class="o">=</span><span class="s2">&quot;hashed_state_token&quot;</span><span class="p">,</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>    <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;google&quot;</span><span class="p">,</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>    <span class="n">redirect_uri</span><span class="o">=</span><span class="s2">&quot;http://localhost:8000/callback&quot;</span><span class="p">,</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>    <span class="n">code_verifier</span><span class="o">=</span><span class="s2">&quot;pkce_code_verifier&quot;</span><span class="p">,</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>    <span class="n">expires_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">UTC</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>    <span class="n">state_data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;link_user_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)}</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="api-routes">API Routes<a class="headerlink" href="#api-routes" title="Permanent link">&para;</a></h2>
<h3 id="authentication-endpoints">Authentication Endpoints<a class="headerlink" href="#authentication-endpoints" title="Permanent link">&para;</a></h3>
<p>All routes are prefixed with <code>/auth</code>.</p>
<h4 id="post-authregister"><code>POST /auth/register</code><a class="headerlink" href="#post-authregister" title="Permanent link">&para;</a></h4>
<p>Register a new user.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="p">{</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">  </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;securepassword123&quot;</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>201 Created</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="p">{</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">  </span><span class="nt">&quot;is_verified&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">  </span><span class="nt">&quot;is_active&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T00:00:00&quot;</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="post-authlogin"><code>POST /auth/login</code><a class="headerlink" href="#post-authlogin" title="Permanent link">&para;</a></h4>
<p>Login with email and password.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="p">{</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">  </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;securepassword123&quot;</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="p">{</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">  </span><span class="nt">&quot;access_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJ...&quot;</span><span class="p">,</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">  </span><span class="nt">&quot;refresh_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJ...&quot;</span><span class="p">,</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">  </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bearer&quot;</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="post-authlogout"><code>POST /auth/logout</code><a class="headerlink" href="#post-authlogout" title="Permanent link">&para;</a></h4>
<p>Logout and revoke refresh token.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="p">{</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">  </span><span class="nt">&quot;refresh_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJ...&quot;</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="p">{</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Logged out successfully&quot;</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="post-authrefresh"><code>POST /auth/refresh</code><a class="headerlink" href="#post-authrefresh" title="Permanent link">&para;</a></h4>
<p>Get new access token using refresh token.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">  </span><span class="nt">&quot;refresh_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJ...&quot;</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="p">{</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">  </span><span class="nt">&quot;access_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJ...&quot;</span><span class="p">,</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">  </span><span class="nt">&quot;refresh_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJ...&quot;</span><span class="p">,</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">  </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bearer&quot;</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="p">}</span>
</span></code></pre></div></p>
<h3 id="password-reset-endpoints">Password Reset Endpoints<a class="headerlink" href="#password-reset-endpoints" title="Permanent link">&para;</a></h3>
<h4 id="post-authpassword-resetrequest"><code>POST /auth/password-reset/request</code><a class="headerlink" href="#post-authpassword-resetrequest" title="Permanent link">&para;</a></h4>
<p>Request password reset email.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="p">{</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@example.com&quot;</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="p">{</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Password reset email sent&quot;</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="post-authpassword-resetconfirm"><code>POST /auth/password-reset/confirm</code><a class="headerlink" href="#post-authpassword-resetconfirm" title="Permanent link">&para;</a></h4>
<p>Confirm password reset with token.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="p">{</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">  </span><span class="nt">&quot;token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;reset-token&quot;</span><span class="p">,</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">  </span><span class="nt">&quot;new_password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;newsecurepassword123&quot;</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code></p>
<h3 id="email-verification-endpoints">Email Verification Endpoints<a class="headerlink" href="#email-verification-endpoints" title="Permanent link">&para;</a></h3>
<h4 id="post-authemail-verificationrequest"><code>POST /auth/email-verification/request</code><a class="headerlink" href="#post-authemail-verificationrequest" title="Permanent link">&para;</a></h4>
<p>Request email verification.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="p">{</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@example.com&quot;</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code></p>
<h4 id="post-authemail-verificationconfirm"><code>POST /auth/email-verification/confirm</code><a class="headerlink" href="#post-authemail-verificationconfirm" title="Permanent link">&para;</a></h4>
<p>Confirm email with verification token.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="p">{</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">  </span><span class="nt">&quot;token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;verification-token&quot;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code></p>
<h4 id="post-authemail-verificationresend"><code>POST /auth/email-verification/resend</code><a class="headerlink" href="#post-authemail-verificationresend" title="Permanent link">&para;</a></h4>
<p>Resend verification email.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="p">{</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">  </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@example.com&quot;</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code></p>
<h3 id="session-management-endpoints">Session Management Endpoints<a class="headerlink" href="#session-management-endpoints" title="Permanent link">&para;</a></h3>
<p>All routes are prefixed with <code>/sessions</code> and require authentication.</p>
<h4 id="get-sessions"><code>GET /sessions</code><a class="headerlink" href="#get-sessions" title="Permanent link">&para;</a></h4>
<p>List all active sessions for the authenticated user.</p>
<p><strong>Headers:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>Authorization: Bearer {access_token}
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="p">{</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">  </span><span class="nt">&quot;sessions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">      </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iPhone 13&quot;</span><span class="p">,</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">      </span><span class="nt">&quot;ip_address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;192.168.1.1&quot;</span><span class="p">,</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">      </span><span class="nt">&quot;user_agent&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mozilla/5.0...&quot;</span><span class="p">,</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="w">      </span><span class="nt">&quot;last_active&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T12:00:00&quot;</span><span class="p">,</span>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="w">      </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T00:00:00&quot;</span>
</span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-39-12"><a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="delete-sessionssession_id"><code>DELETE /sessions/{session_id}</code><a class="headerlink" href="#delete-sessionssession_id" title="Permanent link">&para;</a></h4>
<p>Delete a specific session (logout from specific device).</p>
<p><strong>Headers:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>Authorization: Bearer {access_token}
</span></code></pre></div></p>
<p><strong>Parameters:</strong>
- <code>session_id</code> (UUID): ID of the session to delete</p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="p">{</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Session deleted successfully&quot;</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Error Responses:</strong>
- <code>404 Not Found</code> - Session not found or doesn't belong to user
- <code>401 Unauthorized</code> - Invalid or missing access token</p>
<h4 id="delete-sessionsall"><code>DELETE /sessions/all</code><a class="headerlink" href="#delete-sessionsall" title="Permanent link">&para;</a></h4>
<p>Delete all sessions for the authenticated user (logout from all devices).</p>
<p><strong>Headers:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>Authorization: Bearer {access_token}
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="p">{</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;All sessions deleted successfully&quot;</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Note:</strong> This endpoint deletes all sessions, which can be useful when a user suspects unauthorized access and wants to force logout from all devices.</p>
<h3 id="account-management-endpoints">Account Management Endpoints<a class="headerlink" href="#account-management-endpoints" title="Permanent link">&para;</a></h3>
<p>All routes are prefixed with <code>/account</code> and require authentication (except confirm-email-change).</p>
<h4 id="post-accountchange-password"><code>POST /account/change-password</code><a class="headerlink" href="#post-accountchange-password" title="Permanent link">&para;</a></h4>
<p>Change the authenticated user's password.</p>
<p><strong>Headers:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>Authorization: Bearer {access_token}
</span></code></pre></div></p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="p">{</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="w">  </span><span class="nt">&quot;current_password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;old_password123&quot;</span><span class="p">,</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="w">  </span><span class="nt">&quot;new_password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new_password456&quot;</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="p">{</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Password changed successfully&quot;</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Error Responses:</strong>
- <code>400 Bad Request</code> - Current password is incorrect
- <code>401 Unauthorized</code> - Invalid or missing access token
- <code>404 Not Found</code> - User not found</p>
<p><strong>Note:</strong> Automatically invalidates all other sessions for security.</p>
<h4 id="delete-accountdelete"><code>DELETE /account/delete</code><a class="headerlink" href="#delete-accountdelete" title="Permanent link">&para;</a></h4>
<p>Delete the authenticated user's account.</p>
<p><strong>Headers:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>Authorization: Bearer {access_token}
</span></code></pre></div></p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="p">{</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="w">  </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user_password&quot;</span><span class="p">,</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="w">  </span><span class="nt">&quot;hard_delete&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Parameters:</strong>
- <code>password</code> (string, required): User's password for verification
- <code>hard_delete</code> (boolean, optional): If true, permanently delete; if false, soft delete (default: false)</p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="p">{</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Account deactivated successfully&quot;</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p>OR (for hard delete):
<div class="language-json highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="p">{</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Account permanently deleted successfully&quot;</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Error Responses:</strong>
- <code>400 Bad Request</code> - Password is incorrect
- <code>401 Unauthorized</code> - Invalid or missing access token
- <code>404 Not Found</code> - User not found</p>
<p><strong>Note:</strong> Soft delete sets <code>deleted_at</code> timestamp and deactivates account. Hard delete permanently removes user. Both invalidate all sessions.</p>
<h4 id="post-accountrequest-email-change"><code>POST /account/request-email-change</code><a class="headerlink" href="#post-accountrequest-email-change" title="Permanent link">&para;</a></h4>
<p>Request an email change with verification token.</p>
<p><strong>Headers:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>Authorization: Bearer {access_token}
</span></code></pre></div></p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="p">{</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="w">  </span><span class="nt">&quot;new_email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;newemail@example.com&quot;</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="p">{</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Email change requested. Please verify the token to complete the change.&quot;</span><span class="p">,</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="w">  </span><span class="nt">&quot;token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;email-change-verification-token&quot;</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Error Responses:</strong>
- <code>400 Bad Request</code> - Email already exists
- <code>401 Unauthorized</code> - Invalid or missing access token
- <code>404 Not Found</code> - User not found</p>
<p><strong>Note:</strong> Token expires in 60 minutes. In production, send this token via email instead of returning it in the response.</p>
<h4 id="post-accountconfirm-email-change"><code>POST /account/confirm-email-change</code><a class="headerlink" href="#post-accountconfirm-email-change" title="Permanent link">&para;</a></h4>
<p>Confirm an email change with verification token.</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="p">{</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="w">  </span><span class="nt">&quot;token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;email-change-verification-token&quot;</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="p">{</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Email changed successfully&quot;</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Error Responses:</strong>
- <code>400 Bad Request</code> - Invalid, expired, or already used token, or email no longer available</p>
<p><strong>Note:</strong> Email change resets <code>is_verified</code> to False, requiring re-verification of the new email.</p>
<h3 id="oauth-authentication-endpoints">OAuth Authentication Endpoints<a class="headerlink" href="#oauth-authentication-endpoints" title="Permanent link">&para;</a></h3>
<p>All routes are prefixed with <code>/oauth</code>.</p>
<h4 id="post-oauthproviderauthorize"><code>POST /oauth/{provider}/authorize</code><a class="headerlink" href="#post-oauthproviderauthorize" title="Permanent link">&para;</a></h4>
<p>Initiate OAuth 2.0 authorization flow.</p>
<p><strong>Path Parameters:</strong>
- <code>provider</code> (str): OAuth provider name (e.g., "google")</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="p">{</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="w">  </span><span class="nt">&quot;redirect_uri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8000/auth/oauth/google/callback&quot;</span><span class="p">,</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="w">  </span><span class="nt">&quot;use_pkce&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Parameters:</strong>
- <code>redirect_uri</code> (string, required): Callback URL after OAuth authorization
- <code>use_pkce</code> (boolean, optional): Use PKCE for enhanced security (default: false)</p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="p">{</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">  </span><span class="nt">&quot;authorization_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://accounts.google.com/o/oauth2/v2/auth?...&quot;</span><span class="p">,</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">  </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;state_token_string&quot;</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Note:</strong> Redirect user to <code>authorization_url</code>. The <code>state</code> token is stored server-side for validation.</p>
<h4 id="post-oauthprovidercallback"><code>POST /oauth/{provider}/callback</code><a class="headerlink" href="#post-oauthprovidercallback" title="Permanent link">&para;</a></h4>
<p>Complete OAuth 2.0 authorization and create/link account.</p>
<p><strong>Path Parameters:</strong>
- <code>provider</code> (str): OAuth provider name (e.g., "google")</p>
<p><strong>Request Body:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="p">{</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="w">  </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;authorization_code_from_provider&quot;</span><span class="p">,</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">  </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;state_token_from_authorize&quot;</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Parameters:</strong>
- <code>code</code> (string, required): Authorization code from OAuth provider
- <code>state</code> (string, required): State token from authorize endpoint</p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="p">{</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="w">  </span><span class="nt">&quot;access_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJ...&quot;</span><span class="p">,</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="w">  </span><span class="nt">&quot;refresh_token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;eyJ...&quot;</span><span class="p">,</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="w">  </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="w">  </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">    </span><span class="nt">&quot;is_verified&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="w">    </span><span class="nt">&quot;is_active&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-59-10"><a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-59-11"><a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Error Responses:</strong>
- <code>400 Bad Request</code> - Invalid state, expired state, or code exchange failed
- <code>401 Unauthorized</code> - OAuth provider authentication failed</p>
<p><strong>Note:</strong> Creates new user if first-time OAuth login, or logs in existing user.</p>
<h4 id="get-oauthaccounts"><code>GET /oauth/accounts</code><a class="headerlink" href="#get-oauthaccounts" title="Permanent link">&para;</a></h4>
<p>List all OAuth accounts linked to the authenticated user.</p>
<p><strong>Headers:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>Authorization: Bearer {access_token}
</span></code></pre></div></p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="p">{</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="w">  </span><span class="nt">&quot;accounts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="w">      </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;google&quot;</span><span class="p">,</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="w">      </span><span class="nt">&quot;provider_user_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;google_user_123&quot;</span><span class="p">,</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="w">      </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T00:00:00&quot;</span>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Error Responses:</strong>
- <code>401 Unauthorized</code> - Invalid or missing access token</p>
<h4 id="delete-oauthaccountsaccount_id"><code>DELETE /oauth/accounts/{account_id}</code><a class="headerlink" href="#delete-oauthaccountsaccount_id" title="Permanent link">&para;</a></h4>
<p>Unlink an OAuth account from the authenticated user.</p>
<p><strong>Headers:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>Authorization: Bearer {access_token}
</span></code></pre></div></p>
<p><strong>Path Parameters:</strong>
- <code>account_id</code> (UUID): ID of the OAuth account to unlink</p>
<p><strong>Response:</strong> <code>200 OK</code>
<div class="language-json highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="p">{</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OAuth account unlinked successfully&quot;</span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Error Responses:</strong>
- <code>404 Not Found</code> - OAuth account not found or doesn't belong to user
- <code>401 Unauthorized</code> - Invalid or missing access token</p>
<p><strong>Note:</strong> User must have a password set or at least one other OAuth account linked before unlinking.</p>
<h2 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h2>
<h3 id="jwt-functions">JWT Functions<a class="headerlink" href="#jwt-functions" title="Permanent link">&para;</a></h3>
<h4 id="create_access_tokendata-expires_delta"><code>create_access_token(data, expires_delta)</code><a class="headerlink" href="#create_access_tokendata-expires_delta" title="Permanent link">&para;</a></h4>
<p>Create a JWT access token.</p>
<p><strong>Parameters:</strong>
- <code>data</code> (dict): Payload data
- <code>expires_delta</code> (timedelta, optional): Expiration time</p>
<p><strong>Returns:</strong>
- JWT token string</p>
<h4 id="decode_access_tokentoken"><code>decode_access_token(token)</code><a class="headerlink" href="#decode_access_tokentoken" title="Permanent link">&para;</a></h4>
<p>Decode and validate a JWT token.</p>
<p><strong>Parameters:</strong>
- <code>token</code> (str): JWT token string</p>
<p><strong>Returns:</strong>
- Decoded payload dict</p>
<p><strong>Raises:</strong>
- <code>TokenError</code>: If token is invalid or expired</p>
<h3 id="password-hashing">Password Hashing<a class="headerlink" href="#password-hashing" title="Permanent link">&para;</a></h3>
<h4 id="hash_passwordpassword"><code>hash_password(password)</code><a class="headerlink" href="#hash_passwordpassword" title="Permanent link">&para;</a></h4>
<p>Hash a password using Argon2.</p>
<p><strong>Parameters:</strong>
- <code>password</code> (str): Plain text password</p>
<p><strong>Returns:</strong>
- Hashed password string</p>
<h4 id="verify_passwordhashed_password-plain_password"><code>verify_password(hashed_password, plain_password)</code><a class="headerlink" href="#verify_passwordhashed_password-plain_password" title="Permanent link">&para;</a></h4>
<p>Verify a password against its hash.</p>
<p><strong>Parameters:</strong>
- <code>hashed_password</code> (str): Hashed password
- <code>plain_password</code> (str): Plain text password to verify</p>
<p><strong>Returns:</strong>
- True if valid, False otherwise</p>
<h3 id="rate-limiting">Rate Limiting<a class="headerlink" href="#rate-limiting" title="Permanent link">&para;</a></h3>
<h4 id="ratelimiter"><code>RateLimiter</code><a class="headerlink" href="#ratelimiter" title="Permanent link">&para;</a></h4>
<p>Rate limiter for protecting endpoints.</p>
<p><strong>Methods:</strong>
- <code>hit(key)</code> - Register an attempt
- <code>reset(key)</code> - Clear attempts</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.security.rate_limit</span><span class="w"> </span><span class="kn">import</span> <span class="n">RateLimiter</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="n">limiter</span> <span class="o">=</span> <span class="n">RateLimiter</span><span class="p">(</span><span class="n">max_attempts</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">window_seconds</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="n">limiter</span><span class="o">.</span><span class="n">hit</span><span class="p">(</span><span class="s2">&quot;user@example.com&quot;</span><span class="p">)</span>  <span class="c1"># Raises RateLimitExceeded if exceeded</span>
</span></code></pre></div></p>
<h2 id="models">Models<a class="headerlink" href="#models" title="Permanent link">&para;</a></h2>
<h3 id="user">User<a class="headerlink" href="#user" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy user model.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>email</code> (str): Email address (unique)
- <code>hashed_password</code> (str): Hashed password
- <code>is_active</code> (bool): Whether user is active
- <code>is_verified</code> (bool): Whether email is verified
- <code>is_superuser</code> (bool): Whether user has superuser privileges
- <code>last_login</code> (datetime, optional): Last login timestamp
- <code>deleted_at</code> (datetime, optional): Soft delete timestamp
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="refreshtoken">RefreshToken<a class="headerlink" href="#refreshtoken" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy refresh token model.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>user_id</code> (UUID): User reference
- <code>token_hash</code> (str): Token hash (unique)
- <code>expires_at</code> (datetime): Expiration time
- <code>revoked</code> (bool): Whether token is revoked
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="passwordresettoken">PasswordResetToken<a class="headerlink" href="#passwordresettoken" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy password reset token model.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>user_id</code> (UUID): User reference
- <code>token_hash</code> (str): Token hash (unique)
- <code>expires_at</code> (datetime): Expiration time
- <code>used</code> (bool): Whether token is used
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="emailverificationtoken">EmailVerificationToken<a class="headerlink" href="#emailverificationtoken" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy email verification token model.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>user_id</code> (UUID): User reference
- <code>token_hash</code> (str): Token hash (unique)
- <code>expires_at</code> (datetime): Expiration time
- <code>used</code> (bool): Whether token is used
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="emailchangetoken">EmailChangeToken<a class="headerlink" href="#emailchangetoken" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy email change token model.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>user_id</code> (UUID): User reference
- <code>new_email</code> (str): New email address to change to
- <code>token_hash</code> (str): Token hash (unique)
- <code>expires_at</code> (datetime): Expiration time
- <code>used</code> (bool): Whether token is used
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="role">Role<a class="headerlink" href="#role" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy role model.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>name</code> (str): Role name (unique)
- <code>description</code> (str, optional): Role description
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="permission">Permission<a class="headerlink" href="#permission" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy permission model.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>name</code> (str): Permission name (unique)
- <code>description</code> (str, optional): Permission description
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="userrole">UserRole<a class="headerlink" href="#userrole" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy user-role junction model (many-to-many).</p>
<p><strong>Fields:</strong>
- <code>user_id</code> (UUID): User reference (primary key)
- <code>role_id</code> (UUID): Role reference (primary key)
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="rolepermission">RolePermission<a class="headerlink" href="#rolepermission" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy role-permission junction model (many-to-many).</p>
<p><strong>Fields:</strong>
- <code>role_id</code> (UUID): Role reference (primary key)
- <code>permission_id</code> (UUID): Permission reference (primary key)
- <code>created_at</code> (datetime): Creation timestamp</p>
<h3 id="session">Session<a class="headerlink" href="#session" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy session model.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>user_id</code> (UUID): User reference
- <code>device</code> (str, optional): Device information
- <code>ip_address</code> (str, optional): Client IP address
- <code>user_agent</code> (str, optional): User agent string
- <code>last_active</code> (datetime): Last activity timestamp
- <code>created_at</code> (datetime): Creation timestamp</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="c1"># Sessions are automatically created on login/register</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="c1"># and tracked across the user&#39;s devices</span>
</span></code></pre></div></p>
<h3 id="oauthaccount">OAuthAccount<a class="headerlink" href="#oauthaccount" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy OAuth account model for linking OAuth providers to users.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>user_id</code> (UUID): User reference
- <code>provider</code> (str): OAuth provider name (e.g., "google", "github")
- <code>provider_user_id</code> (str): User ID from OAuth provider
- <code>access_token</code> (str): Encrypted OAuth access token
- <code>refresh_token</code> (str, optional): Encrypted OAuth refresh token
- <code>expires_at</code> (datetime, optional): Access token expiration time
- <code>created_at</code> (datetime): Creation timestamp</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OAuthAccount</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="c1"># OAuth accounts are automatically created/linked</span>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a><span class="c1"># when users authenticate via OAuth providers</span>
</span></code></pre></div></p>
<h3 id="oauthstate">OAuthState<a class="headerlink" href="#oauthstate" title="Permanent link">&para;</a></h3>
<p>SQLAlchemy OAuth state token model for CSRF protection.</p>
<p><strong>Fields:</strong>
- <code>id</code> (UUID): Unique identifier
- <code>state_hash</code> (str): Hashed state token (unique)
- <code>provider</code> (str): OAuth provider name
- <code>redirect_uri</code> (str): Callback URL
- <code>code_verifier</code> (str, optional): PKCE code verifier
- <code>state_data</code> (JSON, optional): Additional state data
- <code>expires_at</code> (datetime): Expiration time
- <code>created_at</code> (datetime): Creation timestamp</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.adapters.sqlalchemy.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">OAuthState</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="c1"># OAuth states are automatically created during authorization</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="c1"># and validated during callback to prevent CSRF attacks</span>
</span></code></pre></div></p>
<h2 id="settings">Settings<a class="headerlink" href="#settings" title="Permanent link">&para;</a></h2>
<h3 id="settings_1"><code>Settings</code><a class="headerlink" href="#settings_1" title="Permanent link">&para;</a></h3>
<p>Configuration class using Pydantic settings.</p>
<p><strong>Fields:</strong>
- <code>jwt_secret_key</code> (str): Secret key for JWT tokens
- <code>jwt_algorithm</code> (str): JWT algorithm (default: HS256)
- <code>access_token_expire_minutes</code> (int): Access token expiration
- <code>refresh_token_expire_days</code> (int): Refresh token expiration
- <code>require_email_verification</code> (bool): Require email verification
- <code>email_provider</code> (str): Email provider type
- <code>oauth_google_client_id</code> (str, optional): Google OAuth client ID
- <code>oauth_google_client_secret</code> (str, optional): Google OAuth client secret
- <code>oauth_google_redirect_uri</code> (str, optional): Google OAuth redirect URI
- <code>oauth_state_expire_minutes</code> (int): OAuth state token expiration (default: 10)</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth</span><span class="w"> </span><span class="kn">import</span> <span class="n">Settings</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>    <span class="n">jwt_secret_key</span><span class="o">=</span><span class="s2">&quot;your-secret-key&quot;</span><span class="p">,</span>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a>    <span class="n">access_token_expire_minutes</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
</span><span id="__span-68-6"><a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a>    <span class="n">require_email_verification</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-68-7"><a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a>    <span class="n">oauth_google_client_id</span><span class="o">=</span><span class="s2">&quot;your-google-client-id&quot;</span><span class="p">,</span>
</span><span id="__span-68-8"><a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a>    <span class="n">oauth_google_client_secret</span><span class="o">=</span><span class="s2">&quot;your-google-client-secret&quot;</span><span class="p">,</span>
</span><span id="__span-68-9"><a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a>    <span class="n">oauth_google_redirect_uri</span><span class="o">=</span><span class="s2">&quot;http://localhost:8000/auth/oauth/google/callback&quot;</span>
</span><span id="__span-68-10"><a id="__codelineno-68-10" name="__codelineno-68-10" href="#__codelineno-68-10"></a><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h2>
<h3 id="get_current_usercredentials-session"><code>get_current_user(credentials, session)</code><a class="headerlink" href="#get_current_usercredentials-session" title="Permanent link">&para;</a></h3>
<p>FastAPI dependency to get the current authenticated user.</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.api.dependencies</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_current_user</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/profile&quot;</span><span class="p">)</span>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_profile</span><span class="p">(</span><span class="n">current_user</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_current_user</span><span class="p">)):</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">current_user</span><span class="o">.</span><span class="n">email</span><span class="p">}</span>
</span></code></pre></div></p>
<h3 id="get_role_adaptersession"><code>get_role_adapter(session)</code><a class="headerlink" href="#get_role_adaptersession" title="Permanent link">&para;</a></h3>
<p>FastAPI dependency to get the role adapter instance.</p>
<p><strong>Returns:</strong>
- <code>SQLAlchemyRoleAdapter</code> instance</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.api.dependencies</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_role_adapter</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/roles&quot;</span><span class="p">)</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="k">def</span><span class="w"> </span><span class="nf">list_roles</span><span class="p">(</span><span class="n">roles</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_role_adapter</span><span class="p">)):</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>    <span class="k">return</span> <span class="n">roles</span><span class="o">.</span><span class="n">get_all_roles</span><span class="p">()</span>
</span></code></pre></div></p>
<h3 id="require_rolerole_name"><code>require_role(role_name)</code><a class="headerlink" href="#require_rolerole_name" title="Permanent link">&para;</a></h3>
<p>FastAPI dependency factory to require a specific role.</p>
<p><strong>Parameters:</strong>
- <code>role_name</code> (str): Name of the required role</p>
<p><strong>Returns:</strong>
- Dependency function that can be used with <code>Depends</code></p>
<p><strong>Raises:</strong>
- <code>HTTPException(403)</code>: If user doesn't have the required role</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.api.dependencies</span><span class="w"> </span><span class="kn">import</span> <span class="n">require_role</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/admin/dashboard&quot;</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="n">Depends</span><span class="p">(</span><span class="n">require_role</span><span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">))])</span>
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a><span class="k">def</span><span class="w"> </span><span class="nf">admin_dashboard</span><span class="p">():</span>
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Admin access granted&quot;</span><span class="p">}</span>
</span></code></pre></div></p>
<h3 id="require_permissionpermission_name"><code>require_permission(permission_name)</code><a class="headerlink" href="#require_permissionpermission_name" title="Permanent link">&para;</a></h3>
<p>FastAPI dependency factory to require a specific permission.</p>
<p><strong>Parameters:</strong>
- <code>permission_name</code> (str): Name of the required permission</p>
<p><strong>Returns:</strong>
- Dependency function that can be used with <code>Depends</code></p>
<p><strong>Raises:</strong>
- <code>HTTPException(403)</code>: If user doesn't have the required permission</p>
<p><strong>Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Depends</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastauth.api.dependencies</span><span class="w"> </span><span class="kn">import</span> <span class="n">require_permission</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="nd">@app</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a>    <span class="s2">&quot;/users/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a>    <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="n">Depends</span><span class="p">(</span><span class="n">require_permission</span><span class="p">(</span><span class="s2">&quot;delete:users&quot;</span><span class="p">))]</span>
</span><span id="__span-72-7"><a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a><span class="p">)</span>
</span><span id="__span-72-8"><a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a><span class="k">def</span><span class="w"> </span><span class="nf">delete_user</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-72-9"><a id="__codelineno-72-9" name="__codelineno-72-9" href="#__codelineno-72-9"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;User deleted&quot;</span><span class="p">}</span>
</span></code></pre></div></p>
<h2 id="exceptions">Exceptions<a class="headerlink" href="#exceptions" title="Permanent link">&para;</a></h2>
<ul>
<li><code>UserAlreadyExistsError</code> - User with email already exists</li>
<li><code>InvalidCredentialsError</code> - Invalid login credentials</li>
<li><code>EmailNotVerifiedError</code> - Email not verified</li>
<li><code>RefreshTokenError</code> - Invalid or expired refresh token</li>
<li><code>PasswordResetError</code> - Invalid or expired reset token</li>
<li><code>EmailVerificationError</code> - Invalid or expired verification token</li>
<li><code>RoleNotFoundError</code> - Role does not exist</li>
<li><code>PermissionNotFoundError</code> - Permission does not exist</li>
<li><code>RoleAlreadyExistsError</code> - Role with the name already exists</li>
<li><code>PermissionAlreadyExistsError</code> - Permission with the name already exists</li>
<li><code>SessionNotFoundError</code> - Session not found or doesn't belong to user</li>
<li><code>InvalidPasswordError</code> - Current password is incorrect (account management)</li>
<li><code>UserNotFoundError</code> - User not found (account management)</li>
<li><code>EmailChangeError</code> - Invalid or expired email change token</li>
<li><code>EmailAlreadyExistsError</code> - Email address already exists</li>
<li><code>OAuthError</code> - OAuth authentication error (invalid state, code exchange failed, etc.)</li>
<li><code>OAuthAccountNotFoundError</code> - OAuth account not found or doesn't belong to user</li>
<li><code>OAuthProviderNotFoundError</code> - OAuth provider not configured or not found</li>
<li><code>RateLimitExceeded</code> - Too many attempts</li>
<li><code>TokenError</code> - Invalid or expired JWT token</li>
</ul>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024-2025 Sreekar Nutulapati
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/sreekarnv/fastauth" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/fastauth/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.tabs.link"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>